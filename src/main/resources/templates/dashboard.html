<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <link rel="icon" type="image/x-icon" th:href="@{/image/favicon.ico}">

    <!--    <link rel="icon" type="image/x-icon" th:href="@{/image/favicon.ico}">-->
    <!--animate.css cdn-->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <!--google icons-->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500&family=Roboto&display=swap"
          rel="stylesheet">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/styles/style.css}">
    <!--new bootstrap 5.3-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <!--    Google charts-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <!--   loading the variables from the server   -->
    <script th:inline="javascript">
        // for bar chart meetingCountByStudentAndType
        var meetingCountByStudentAndTypeJson = /*[[${meetingCountByStudentAndTypeJson}]]*/ '';
        var meetingCountByStudentAndType = JSON.parse(meetingCountByStudentAndTypeJson);
        console.log(meetingCountByStudentAndType);
    </script>

    <script type="text/javascript">
        google.charts.load('current', {'packages': ['bar']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Student');
            data.addColumn('number', '1:1 - Reading');
            data.addColumn('number', '1:1 - Writing');
            data.addColumn('number', 'Guided Reading');
            data.addColumn('number', 'Strategy Group - Reading');
            data.addColumn('number', 'Strategy Group - Writing');

            // Loop through each entry in the meetingCountByStudentAndTypeJson variable
            Object.entries(meetingCountByStudentAndType).forEach(function ([student, counts]) {
                // Add a new row to the data table with the student name and the meeting counts by type
                data.addRow([student, counts['1:1 - Reading'], counts['1:1 - Writing'], counts['Guided Reading'], counts['Strategy Group - Reading'], counts['Strategy Group - Writing']]);
            });

            var options = {
                chart: {
                    title: 'Number of Meetings per Student by Type', subtitle: ' Based on the TakeNote webapp'
                },
                bars: 'vertical',
                vAxis: {
                    format: 'decimal'
                },
                height: 400,
                colors:
                    ['#76c939', '#2f9eb7', '#327c05', '#21480b', '#075891']
            };

            var chart = new google.charts.Bar(document.getElementById('bar_chart'));
            chart.draw(data, google.charts.Bar.convertOptions(options));
        }


    </script>
    <!--    END OF BAR CHART-->

    <!--    GOOGLE CHART-->
    <script type="text/javascript">
        // Load the Visualization API and the corechart package.
        google.charts.load('current', {'packages': ['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            // Create the data table.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Subject Level');
            data.addColumn('number', 'Students');
            for (var i = 0; i < studentsDistributionBySubjectLevel.length; i++) {
                var subjectLevel = studentsDistributionBySubjectLevel[i];
                var count = 1;
                data.addRow([subjectLevel, count]);
            }

            // Set chart options
            var options = {
                'title': 'Meeting',
                'width': 900,
                'height': 500,
                'titleTextStyle': {
                    color: 'black',
                },
            }
            // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.PieChart(document.getElementById('pie_chart'));
            chart.draw(data, options);

        }
    </script>
    <!--  end of google chart  -->
    <!--    <script th:src="@{/js/script.js}" defer></script>-->
    <script th:src="@{/js/index.js}" defer></script>
    <title>TakeNote</title>
</head>

<body class="d-flex flex-column h-100" style="overflow: hidden">

<!-- NavBar -->
<div th:replace="~{fragments/navigation :: navigation}"></div>
<!-- End of Navbar -->
<!-- preloader -->
<div th:replace="~{fragments/preloader :: preloader}"></div>
<!-- End of preloader -->
<main>

    <div class="main-container">

        <!-- Hero -->
        <section class="d-flex justify-content-center align-items-center text-center">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div id="bar_chart"></div>
                    </div>
                    <div class="col-12">
                        <!--Div that will hold the pie chart-->
                        <div id="pie_chart"></div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End of Hero -->
    </div>


</main>

<!--footer-->
<div th:replace="~{fragments/footer :: footer}"></div>
<!--end of footer-->
<!--  jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
</body>
</html>