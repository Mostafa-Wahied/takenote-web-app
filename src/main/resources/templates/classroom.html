<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
  <link rel="icon" type="image/x-icon" th:href="@{/image/favicon.ico}">
  <!--google icons-->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
  <!--animate.css cdn-->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500&family=Roboto&display=swap"
        rel="stylesheet">

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/styles/datatables.css}">
  <link rel="stylesheet" th:href="@{/styles/style.css}">
  <link rel="stylesheet" th:href="@{/styles/student.css}">
  <!--new bootstrap 5.3-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <!--    Google charts-->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <!-- Datatables -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css"/>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>

  <script th:src="@{/js/student.js}" defer></script>
  <script th:src="@{/js/datatables.js}" defer></script>
  <script th:src="@{/js/script.js}" defer></script>
  <title th:text="${classroom.className}">TakeNote</title>
</head>

<body class="d-flex flex-column h-100">
<!-- NavBar -->
<div th:replace="~{fragments/navigation :: navigation}"></div>
<!-- End of Navbar -->
<!-- preloader -->
<div th:replace="~{fragments/preloader :: preloader}"></div>
<!-- End of preloader -->

<main>
  <div class="animate__animated animate__fadeIn container">

    <figure class="text-center mt-5">
      <p class="display-6 text-center" th:text="${classroom.className}"></p>
    </figure>
    <br>
    <!--Students table-->
    <section class="container px-2">

      <div class="container d-flex justify-content-start mx-auto">
        <a th:href="@{/showNewStudentForm(classroomId=${classroomId})}" id="add-student-btn"
           class="btn btn-primary rounded-pill">Add
          Student</a>
      </div>

      <div class="container mt-2 pt-2">
        <table id="students-table" class="students-table table table-striped table-hover table-bordered">
          <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col" data-class-name="priority">Reading Level</th>
            <th scope="col">Reading<br>Date Last Met</th>
            <th scope="col">Writing<br>Date Last Met</th>
            <th scope="col">Actions</th>
          </tr>
          </thead>

          <tbody>

          <th:block th:each="student : ${studentsWithLastMeeting}">
            <tr th:each="meeting, iterStat : ${student.meetings}">

              <td style="white-space: nowrap; width: 3%">
                <a id="student-btn" class="btn btn-light color-2"
                   th:text="${student.firstName + ' ' + student.lastName}"
                   th:href="@{/notebook/student/{id} (id=${student.id})}"></a>
              </td>
              <td style="white-space: nowrap; width: 15%" th:text="${meeting.subjectLevel}"></td>
              <td style="white-space: nowrap; width: 15%" th:text="${meeting.date}"
                  th:if="${meeting.subject=='Reading'}"></td>
              <td th:unless="${meeting.subject=='Reading'}"></td>
              <td style="white-space: nowrap; width: 15%" th:text="${meeting.date}"
                  th:if="${meeting.subject=='Writing'}"></td>
              <td th:unless="${meeting.subject=='Writing'}"></td>
              <td>
                <div class="d-flex" style="position: relative; right: 1rem;">
                  <a th:href="@{/showUpdateForm/{id}(id=${student.id})}"
                     class="btn"
                     style="border: none; background: transparent;"><span
                          class="students-symbol material-symbols-outlined">edit_square</span></a>
                  <form th:action="@{/deleteStudent/{id}(id=${student.id})}" method="post"
                        onsubmit="return confirmDelete(event)">
                    <input type="hidden" name="confirm" value="true">
                    <button type="submit" class="btn"
                            style="border: none; background: transparent;">
                      <span class="students-symbol material-symbols-outlined">delete</span>
                    </button>
                  </form>

                </div>
              </td>
            </tr>
          </th:block>
          </tbody>
        </table>
      </div>

    </section>
    <!--    End of students table-->
  </div>
</main>
<!--footer-->
<div th:replace="~{fragments/footer :: footer}"></div>
<!--end of footer-->
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
</body>

</html>